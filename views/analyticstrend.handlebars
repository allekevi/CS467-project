<div class="topnav">
    <ul class="navmenu">
        <li class="navitem"><a class="active">Analytics</a></li>
        <li class="navitem"><div class="inactive"><a href="/manageusers">Manage Users</a></div></li>
        <li class="navitem"><div class="inactive"><a href="/manageusers/editprofile">Edit Profile</a></div></li>
        <li class="navitem"><div class="inactive"><a href="/logout">Logout</a></div></li>
        <li class="navitem" id="logo"><img src="/static/images/KudosLogo.png" width="" height="50px"></li>
    </ul>
</div>

<div class="subnav">
    <ul class="submenu">
        <li class="subitem"><a class="active">Award Trend</a></li>
        <li class="subitem"><div class="subinactive"><a href="/manageusers/analyticsmost">Most Awarded</a></div></li>
        <li class="subitem"><div class="subinactive"><a href="/manageusers/analyticsfeedback">Feedback Analysis</a></div></li>
    </ul>
</div>
<div class="arrow-down" style="margin-left:80px; border-top: 20px solid #7F7F7F;"></div>
<div class="menu" id="usermenu">
    <div class="menutitle">Awards Granted, Over Last 12 Months</div>
    <hr>
    <div style="padding-left: 15px; padding-right: 15px; padding-bottom: 30px;">
        <canvas id="myChart"></canvas>
        <script>
            var myx = new XMLHttpRequest();
            var dates = [];
            var awards = [];
            myx.open("GET", "/manageusers/trenddata", true);
            myx.onload = function () {
                if (myx.readyState === myx.DONE) {
                    if (myx.status === 200) {
                        var myData = myx.response;

                        for (var i = 0; i < myData.length; i++) {
                            dates.push(myData[i]['calendar_month']);
                            awards.push(myData[i]['awardNum']);
                        }

                        let myChart = document.getElementById('myChart').getContext('2d');
                        let massPopChart = new Chart(myChart, {
                            type: 'line',
                            data: {
                                labels: dates,
                                datasets: [{
                                    label: 'Awards Given',
                                    data: awards,
                                    backgroundColor: 'rgba(0, 145, 213, 0.1)',
                                    borderColor: 'rgba(0, 145, 213, 0.1)'
                                }]
                            },
                            options: {}
                        });
                    }
                }
            };
            myx.responseType = 'json';
            myx.send();
            </script>
        </div>
    </div>
